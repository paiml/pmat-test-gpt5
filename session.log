mirasol[main*] ~/code/pmat-test-gpt5 ᓆ python -V 2>/dev/null || python3 -V 2>/dev/null || echo "python not found"
Python 3.12.3
mirasol[main*] ~/code/pmat-test-gpt5 ᓆ python -m venv .venv && source .venv/bin/activate && python -m pip install --upgrade pip && pip install -e .[dev]
Requirement already satisfied: pip in ./.venv/lib/python3.12/site-packages (24.0)
Collecting pip
  Downloading pip-25.2-py3-none-any.whl.metadata (4.7 kB)
Downloading pip-25.2-py3-none-any.whl (1.8 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.8/1.8 MB 36.6 MB/s eta 0:00:00
Installing collected packages: pip
  Attempting uninstall: pip
    Found existing installation: pip 24.0
    Uninstalling pip-24.0:
      Successfully uninstalled pip-24.0
Successfully installed pip-25.2
Obtaining file:///home/alfredo/code/pmat-test-gpt5
ERROR: Exception:
Traceback (most recent call last):
  File "/home/alfredo/code/pmat-test-gpt5/.venv/lib/python3.12/site-packages/pip/_internal/cli/base_command.py", line 107, in _run_wrapper
    status = _inner_run()
             ^^^^^^^^^^^^
  File "/home/alfredo/code/pmat-test-gpt5/.venv/lib/python3.12/site-packages/pip/_internal/cli/base_command.py", line 98, in _inner_run
    return self.run(options, args)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alfredo/code/pmat-test-gpt5/.venv/lib/python3.12/site-packages/pip/_internal/cli/req_command.py", line 71, in wrapper
    return func(self, options, args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alfredo/code/pmat-test-gpt5/.venv/lib/python3.12/site-packages/pip/_internal/commands/install.py", line 393, in run
    requirement_set = resolver.resolve(
                      ^^^^^^^^^^^^^^^^^
  File "/home/alfredo/code/pmat-test-gpt5/.venv/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/resolver.py", line 79, in resolve
    collected = self.factory.collect_root_requirements(root_reqs)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alfredo/code/pmat-test-gpt5/.venv/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/factory.py", line 538, in collect_root_requirements
    reqs = list(
           ^^^^^
  File "/home/alfredo/code/pmat-test-gpt5/.venv/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/factory.py", line 494, in _make_requirements_from_install_req
    cand = self._make_base_candidate_from_link(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alfredo/code/pmat-test-gpt5/.venv/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/factory.py", line 205, in _make_base_candidate_from_link
    self._editable_candidate_cache[link] = EditableCandidate(
                                           ^^^^^^^^^^^^^^^^^^
  File "/home/alfredo/code/pmat-test-gpt5/.venv/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/candidates.py", line 334, in __init__
    super().__init__(
  File "/home/alfredo/code/pmat-test-gpt5/.venv/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/candidates.py", line 162, in __init__
    self.dist = self._prepare()
                ^^^^^^^^^^^^^^^
  File "/home/alfredo/code/pmat-test-gpt5/.venv/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/candidates.py", line 239, in _prepare
    dist = self._prepare_distribution()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alfredo/code/pmat-test-gpt5/.venv/lib/python3.12/site-packages/pip/_internal/resolution/resolvelib/candidates.py", line 344, in _prepare_distribution
    return self._factory.preparer.prepare_editable_requirement(self._ireq)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alfredo/code/pmat-test-gpt5/.venv/lib/python3.12/site-packages/pip/_internal/operations/prepare.py", line 708, in prepare_editable_requirement
    dist = _get_prepared_distribution(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/alfredo/code/pmat-test-gpt5/.venv/lib/python3.12/site-packages/pip/_internal/operations/prepare.py", line 77, in _get_prepared_distribution
    abstract_dist.prepare_distribution_metadata(
  File "/home/alfredo/code/pmat-test-gpt5/.venv/lib/python3.12/site-packages/pip/_internal/distributions/sdist.py", line 42, in prepare_distribution_metadata
    self.req.load_pyproject_toml()
  File "/home/alfredo/code/pmat-test-gpt5/.venv/lib/python3.12/site-packages/pip/_internal/req/req_install.py", line 515, in load_pyproject_toml
    pyproject_toml_data = load_pyproject_toml(
                          ^^^^^^^^^^^^^^^^^^^^
  File "/home/alfredo/code/pmat-test-gpt5/.venv/lib/python3.12/site-packages/pip/_internal/pyproject.py", line 67, in load_pyproject_toml
    pp_toml = tomllib.loads(f.read())
              ^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/tomllib/_parser.py", line 127, in loads
    raise suffixed_err(
tomllib.TOMLDecodeError: Expected newline or end of document after a statement (at line 77, column 39)
(.venv) mirasol[main*] ~/code/pmat-test-gpt5 ᓆ source .venv/bin/activate && pip install -e .[dev]
Obtaining file:///home/alfredo/code/pmat-test-gpt5
  Installing build dependencies ... done
  Checking if build backend supports build_editable ... done
  Getting requirements to build editable ... done
  Installing backend dependencies ... done
  Preparing editable metadata (pyproject.toml) ... error
  error: subprocess-exited-with-error

  × Preparing editable metadata (pyproject.toml) did not run successfully.
  │ exit code: 1
  ╰─> [43 lines of output]
      Traceback (most recent call last):
        File "/home/alfredo/code/pmat-test-gpt5/.venv/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py", line 195, in prepare_metadata_for_build_editable
          hook = backend.prepare_metadata_for_build_editable
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
      AttributeError: module 'hatchling.build' has no attribute 'prepare_metadata_for_build_editable'

      During handling of the above exception, another exception occurred:

      Traceback (most recent call last):
        File "/home/alfredo/code/pmat-test-gpt5/.venv/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py", line 389, in <module>
          main()
        File "/home/alfredo/code/pmat-test-gpt5/.venv/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py", line 373, in main
          json_out["return_val"] = hook(**hook_input["kwargs"])
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File "/home/alfredo/code/pmat-test-gpt5/.venv/lib/python3.12/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py", line 204, in prepare_metadata_for_build_editable
          whl_basename = build_hook(metadata_directory, config_settings)
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File "/tmp/pip-build-env-mkcebxpo/overlay/lib/python3.12/site-packages/hatchling/build.py", line 83, in build_editable
          return os.path.basename(next(builder.build(directory=wheel_directory, versions=['editable'])))
                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File "/tmp/pip-build-env-mkcebxpo/overlay/lib/python3.12/site-packages/hatchling/builders/plugin/interface.py", line 155, in build
          artifact = version_api[version](directory, **build_data)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File "/tmp/pip-build-env-mkcebxpo/overlay/lib/python3.12/site-packages/hatchling/builders/wheel.py", line 496, in build_editable
          return self.build_editable_detection(directory, **build_data)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        File "/tmp/pip-build-env-mkcebxpo/overlay/lib/python3.12/site-packages/hatchling/builders/wheel.py", line 507, in build_editable_detection
          for included_file in self.recurse_selected_project_files():
        File "/tmp/pip-build-env-mkcebxpo/overlay/lib/python3.12/site-packages/hatchling/builders/plugin/interface.py", line 180, in recurse_selected_project_files
          if self.config.only_include:
             ^^^^^^^^^^^^^^^^^^^^^^^^
        File "/usr/lib/python3.12/functools.py", line 995, in __get__
          val = self.func(instance)
                ^^^^^^^^^^^^^^^^^^^
        File "/tmp/pip-build-env-mkcebxpo/overlay/lib/python3.12/site-packages/hatchling/builders/config.py", line 713, in only_include
          only_include = only_include_config.get('only-include', self.default_only_include()) or self.packages
                                                                                                 ^^^^^^^^^^^^^
        File "/usr/lib/python3.12/functools.py", line 995, in __get__
          val = self.func(instance)
                ^^^^^^^^^^^^^^^^^^^
        File "/tmp/pip-build-env-mkcebxpo/overlay/lib/python3.12/site-packages/hatchling/builders/config.py", line 667, in packages
          raise TypeError(message)
      TypeError: Package #1 in field `tool.hatch.build.targets.wheel.packages` must be a string
      [end of output]

  note: This error originates from a subprocess, and is likely not a problem with pip.
error: metadata-generation-failed

× Encountered error while generating package metadata.
╰─> See above for output.

note: This is an issue with the package mentioned above, not pip.
hint: See above for details.
(.venv) mirasol[main*] ~/code/pmat-test-gpt5 ᓆ source .venv/bin/activate && pip install -e .[dev]
Obtaining file:///home/alfredo/code/pmat-test-gpt5
  Installing build dependencies ... done
  Checking if build backend supports build_editable ... done
  Getting requirements to build editable ... done
  Installing backend dependencies ... done
  Preparing editable metadata (pyproject.toml) ... done
Collecting black>=24.4 (from findpy==0.1.0)
  Downloading black-25.1.0-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.manylinux_2_28_x86_64.whl.metadata (81 kB)
Collecting mypy>=1.7 (from findpy==0.1.0)
  Downloading mypy-1.17.1-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl.metadata (2.2 kB)
Collecting pre-commit>=3.5 (from findpy==0.1.0)
  Downloading pre_commit-4.3.0-py2.py3-none-any.whl.metadata (1.2 kB)
Collecting pytest-cov>=4.0 (from findpy==0.1.0)
  Downloading pytest_cov-6.2.1-py3-none-any.whl.metadata (30 kB)
Collecting pytest>=7.0 (from findpy==0.1.0)
  Using cached pytest-8.4.1-py3-none-any.whl.metadata (7.7 kB)
Collecting ruff>=0.4.0 (from findpy==0.1.0)
  Downloading ruff-0.12.10-py3-none-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (25 kB)
Collecting click>=8.0.0 (from black>=24.4->findpy==0.1.0)
  Downloading click-8.2.1-py3-none-any.whl.metadata (2.5 kB)
Collecting mypy-extensions>=0.4.3 (from black>=24.4->findpy==0.1.0)
  Downloading mypy_extensions-1.1.0-py3-none-any.whl.metadata (1.1 kB)
Collecting packaging>=22.0 (from black>=24.4->findpy==0.1.0)
  Using cached packaging-25.0-py3-none-any.whl.metadata (3.3 kB)
Collecting pathspec>=0.9.0 (from black>=24.4->findpy==0.1.0)
  Using cached pathspec-0.12.1-py3-none-any.whl.metadata (21 kB)
Collecting platformdirs>=2 (from black>=24.4->findpy==0.1.0)
  Downloading platformdirs-4.3.8-py3-none-any.whl.metadata (12 kB)
Collecting typing_extensions>=4.6.0 (from mypy>=1.7->findpy==0.1.0)
  Downloading typing_extensions-4.14.1-py3-none-any.whl.metadata (3.0 kB)
Collecting cfgv>=2.0.0 (from pre-commit>=3.5->findpy==0.1.0)
  Downloading cfgv-3.4.0-py2.py3-none-any.whl.metadata (8.5 kB)
Collecting identify>=1.0.0 (from pre-commit>=3.5->findpy==0.1.0)
  Downloading identify-2.6.13-py2.py3-none-any.whl.metadata (4.4 kB)
Collecting nodeenv>=0.11.1 (from pre-commit>=3.5->findpy==0.1.0)
  Downloading nodeenv-1.9.1-py2.py3-none-any.whl.metadata (21 kB)
Collecting pyyaml>=5.1 (from pre-commit>=3.5->findpy==0.1.0)
  Downloading PyYAML-6.0.2-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl.metadata (2.1 kB)
Collecting virtualenv>=20.10.0 (from pre-commit>=3.5->findpy==0.1.0)
  Downloading virtualenv-20.34.0-py3-none-any.whl.metadata (4.6 kB)
Collecting iniconfig>=1 (from pytest>=7.0->findpy==0.1.0)
  Using cached iniconfig-2.1.0-py3-none-any.whl.metadata (2.7 kB)
Collecting pluggy<2,>=1.5 (from pytest>=7.0->findpy==0.1.0)
  Using cached pluggy-1.6.0-py3-none-any.whl.metadata (4.8 kB)
Collecting pygments>=2.7.2 (from pytest>=7.0->findpy==0.1.0)
  Using cached pygments-2.19.2-py3-none-any.whl.metadata (2.5 kB)
Collecting coverage>=7.5 (from coverage[toml]>=7.5->pytest-cov>=4.0->findpy==0.1.0)
  Downloading coverage-7.10.5-cp312-cp312-manylinux1_x86_64.manylinux_2_28_x86_64.manylinux_2_5_x86_64.whl.metadata (8.9 kB)
Collecting distlib<1,>=0.3.7 (from virtualenv>=20.10.0->pre-commit>=3.5->findpy==0.1.0)
  Downloading distlib-0.4.0-py2.py3-none-any.whl.metadata (5.2 kB)
Collecting filelock<4,>=3.12.2 (from virtualenv>=20.10.0->pre-commit>=3.5->findpy==0.1.0)
  Downloading filelock-3.19.1-py3-none-any.whl.metadata (2.1 kB)
Downloading black-25.1.0-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.manylinux_2_28_x86_64.whl (1.8 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 1.8/1.8 MB 46.3 MB/s  0:00:00
Downloading click-8.2.1-py3-none-any.whl (102 kB)
Downloading mypy-1.17.1-cp312-cp312-manylinux2014_x86_64.manylinux_2_17_x86_64.manylinux_2_28_x86_64.whl (12.7 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 12.7/12.7 MB 51.6 MB/s  0:00:00
Downloading mypy_extensions-1.1.0-py3-none-any.whl (5.0 kB)
Using cached packaging-25.0-py3-none-any.whl (66 kB)
Using cached pathspec-0.12.1-py3-none-any.whl (31 kB)
Downloading platformdirs-4.3.8-py3-none-any.whl (18 kB)
Downloading pre_commit-4.3.0-py2.py3-none-any.whl (220 kB)
Downloading cfgv-3.4.0-py2.py3-none-any.whl (7.2 kB)
Downloading identify-2.6.13-py2.py3-none-any.whl (99 kB)
Downloading nodeenv-1.9.1-py2.py3-none-any.whl (22 kB)
Using cached pytest-8.4.1-py3-none-any.whl (365 kB)
Using cached pluggy-1.6.0-py3-none-any.whl (20 kB)
Using cached iniconfig-2.1.0-py3-none-any.whl (6.0 kB)
Using cached pygments-2.19.2-py3-none-any.whl (1.2 MB)
Downloading pytest_cov-6.2.1-py3-none-any.whl (24 kB)
Downloading coverage-7.10.5-cp312-cp312-manylinux1_x86_64.manylinux_2_28_x86_64.manylinux_2_5_x86_64.whl (251 kB)
Downloading PyYAML-6.0.2-cp312-cp312-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (767 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 767.5/767.5 kB 45.1 MB/s  0:00:00
Downloading ruff-0.12.10-py3-none-manylinux_2_17_x86_64.manylinux2014_x86_64.whl (13.1 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 13.1/13.1 MB 51.2 MB/s  0:00:00
Downloading typing_extensions-4.14.1-py3-none-any.whl (43 kB)
Downloading virtualenv-20.34.0-py3-none-any.whl (6.0 MB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 6.0/6.0 MB 52.0 MB/s  0:00:00
Downloading distlib-0.4.0-py2.py3-none-any.whl (469 kB)
Downloading filelock-3.19.1-py3-none-any.whl (15 kB)
Building wheels for collected packages: findpy
  Building editable for findpy (pyproject.toml) ... done
  Created wheel for findpy: filename=findpy-0.1.0-py3-none-any.whl size=3383 sha256=697535172c85e0cc0be4056cb0fd3719d5d1cd5903ef4ab10079eec5e4b36a71
  Stored in directory: /tmp/pip-ephem-wheel-cache-0qbte99q/wheels/93/28/54/3db3783cf072b7ba8959b4f4b56e71ca3ea77a675ad3e14b64
Successfully built findpy
Installing collected packages: distlib, typing_extensions, ruff, pyyaml, pygments, pluggy, platformdirs, pathspec, packaging, nodeenv, mypy-extensions, iniconfig, identify, findpy, filelock, coverage, click, cfgv, virtualenv, pytest, mypy, black, pytest-cov, pre-commit
Successfully installed black-25.1.0 cfgv-3.4.0 click-8.2.1 coverage-7.10.5 distlib-0.4.0 filelock-3.19.1 findpy-0.1.0 identify-2.6.13 iniconfig-2.1.0 mypy-1.17.1 mypy-extensions-1.1.0 nodeenv-1.9.1 packaging-25.0 pathspec-0.12.1 platformdirs-4.3.8 pluggy-1.6.0 pre-commit-4.3.0 pygments-2.19.2 pytest-8.4.1 pytest-cov-6.2.1 pyyaml-6.0.2 ruff-0.12.10 typing_extensions-4.14.1 virtualenv-20.34.0
(.venv) mirasol[main*] ~/code/pmat-test-gpt5 ᓆ source .venv/bin/activate && pytest -q
.F.....                                                                                                                                                      [100%]
============================================================================= FAILURES =============================================================================
_________________________________________________________________________ test_cli_print0 __________________________________________________________________________

tmp_path = PosixPath('/tmp/pytest-of-alfredo/pytest-0/test_cli_print00'), capsys = <_pytest.capture.CaptureFixture object at 0x73ca94c6f470>

    def test_cli_print0(tmp_path: Path, capsys):
        touch(tmp_path / "x")
        rc = main([str(tmp_path), "-type", "f", "-print0"])
        assert rc == 0
        out = capsys.readouterr().out
>       assert "\0" in out
E       AssertionError: assert '\x00' in '/tmp/pytest-of-alfredo/pytest-0/test_cli_print00/x'

tests/test_cli.py:29: AssertionError
===================================================================== short test summary info ======================================================================
FAILED tests/test_cli.py::test_cli_print0 - AssertionError: assert '\x00' in '/tmp/pytest-of-alfredo/pytest-0/test_cli_print00/x'
1 failed, 6 passed in 0.05s
(.venv) mirasol[main*] ~/code/pmat-test-gpt5 ᓆ source .venv/bin/activate && pytest -q
.......                                                                                                                                                      [100%]
7 passed in 0.01s
(.venv) mirasol[main*] ~/code/pmat-test-gpt5 ᓆ source .venv/bin/activate && ruff check .
warning: The top-level linter settings are deprecated in favour of their counterparts in the `lint` section. Please update the following options in `pyproject.toml`:
  - 'ignore' -> 'lint.ignore'
  - 'select' -> 'lint.select'
UP035 [*] Import from `collections.abc` instead: `Sequence`
 --> src/findlike/cli.py:5:1
  |
3 | import argparse
4 | import sys
5 | from typing import Optional, Sequence
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
6 |
7 | from .core import Options, parse_size, search
  |
help: Import from `collections.abc`

E501 Line too long (102 > 100)
  --> src/findlike/cli.py:51:101
   |
49 |         help="Glob patterns to exclude directories from descent (can repeat)",
50 |     )
51 |     p.add_argument("-print0", action="store_true", help="Separate output with NUL instead of newline")
   |                                                                                                     ^^
52 |     p.add_argument("-q", "--quiet", action="store_true", help="Suppress error messages")
53 |     return p
   |

UP045 Use `X | None` for type annotations
  --> src/findlike/cli.py:56:16
   |
56 | def main(argv: Optional[Sequence[str]] = None) -> int:
   |                ^^^^^^^^^^^^^^^^^^^^^^^
57 |     p = build_parser()
58 |     ns = p.parse_args(argv)
   |
help: Convert to `X | None`

SIM105 Use `contextlib.suppress(Exception)` instead of `try`-`except`-`pass`
   --> src/findlike/cli.py:97:9
    |
 95 |           sys.stdout.flush()
 96 |       except BrokenPipeError:
 97 | /         try:
 98 | |             sys.stdout.close()
 99 | |         except Exception:
100 | |             pass
    | |________________^
101 |           return 0
    |
help: Replace with `contextlib.suppress(Exception)`

I001 [*] Import block is un-sorted or un-formatted
 --> src/findlike/core.py:1:1
  |
1 | / from __future__ import annotations
2 | |
3 | | import fnmatch
4 | | import os
5 | | import stat
6 | | from dataclasses import dataclass
7 | | from typing import Iterator, Optional, Sequence, Tuple, List
  | |____________________________________________________________^
8 |
9 |   SizeOp = Tuple[str, int]  # (op: 'eq'|'lt'|'gt', bytes)
  |
help: Organize imports

UP035 [*] Import from `collections.abc` instead: `Iterator`, `Sequence`
 --> src/findlike/core.py:7:1
  |
5 | import stat
6 | from dataclasses import dataclass
7 | from typing import Iterator, Optional, Sequence, Tuple, List
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
8 |
9 | SizeOp = Tuple[str, int]  # (op: 'eq'|'lt'|'gt', bytes)
  |
help: Import from `collections.abc`

UP035 `typing.Tuple` is deprecated, use `tuple` instead
 --> src/findlike/core.py:7:1
  |
5 | import stat
6 | from dataclasses import dataclass
7 | from typing import Iterator, Optional, Sequence, Tuple, List
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
8 |
9 | SizeOp = Tuple[str, int]  # (op: 'eq'|'lt'|'gt', bytes)
  |

UP035 `typing.List` is deprecated, use `list` instead
 --> src/findlike/core.py:7:1
  |
5 | import stat
6 | from dataclasses import dataclass
7 | from typing import Iterator, Optional, Sequence, Tuple, List
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
8 |
9 | SizeOp = Tuple[str, int]  # (op: 'eq'|'lt'|'gt', bytes)
  |

UP006 Use `tuple` instead of `Tuple` for type annotation
 --> src/findlike/core.py:9:10
  |
7 | from typing import Iterator, Optional, Sequence, Tuple, List
8 |
9 | SizeOp = Tuple[str, int]  # (op: 'eq'|'lt'|'gt', bytes)
  |          ^^^^^
  |
help: Replace with `tuple`

UP045 Use `X | None` for type annotations
  --> src/findlike/core.py:14:11
   |
12 | @dataclass(frozen=True)
13 | class Options:
14 |     name: Optional[str] = None
   |           ^^^^^^^^^^^^^
15 |     iname: Optional[str] = None
16 |     type: Optional[str] = None  # 'f' | 'd' | 'l'
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
  --> src/findlike/core.py:15:12
   |
13 | class Options:
14 |     name: Optional[str] = None
15 |     iname: Optional[str] = None
   |            ^^^^^^^^^^^^^
16 |     type: Optional[str] = None  # 'f' | 'd' | 'l'
17 |     maxdepth: Optional[int] = None
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
  --> src/findlike/core.py:16:11
   |
14 |     name: Optional[str] = None
15 |     iname: Optional[str] = None
16 |     type: Optional[str] = None  # 'f' | 'd' | 'l'
   |           ^^^^^^^^^^^^^
17 |     maxdepth: Optional[int] = None
18 |     mindepth: int = 0
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
  --> src/findlike/core.py:17:15
   |
15 |     iname: Optional[str] = None
16 |     type: Optional[str] = None  # 'f' | 'd' | 'l'
17 |     maxdepth: Optional[int] = None
   |               ^^^^^^^^^^^^^
18 |     mindepth: int = 0
19 |     follow_symlinks: bool = False
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
  --> src/findlike/core.py:21:11
   |
19 |     follow_symlinks: bool = False
20 |     empty: bool = False
21 |     size: Optional[SizeOp] = None
   |           ^^^^^^^^^^^^^^^^
22 |     ignore_hidden: bool = False
23 |     exclude: Tuple[str, ...] = ()
   |
help: Convert to `X | None`

UP006 Use `tuple` instead of `Tuple` for type annotation
  --> src/findlike/core.py:23:14
   |
21 |     size: Optional[SizeOp] = None
22 |     ignore_hidden: bool = False
23 |     exclude: Tuple[str, ...] = ()
   |              ^^^^^
24 |     exclude_dir: Tuple[str, ...] = ()
25 |     quiet: bool = False
   |
help: Replace with `tuple`

UP006 Use `tuple` instead of `Tuple` for type annotation
  --> src/findlike/core.py:24:18
   |
22 |     ignore_hidden: bool = False
23 |     exclude: Tuple[str, ...] = ()
24 |     exclude_dir: Tuple[str, ...] = ()
   |                  ^^^^^
25 |     quiet: bool = False
   |
help: Replace with `tuple`

UP045 Use `X | None` for type annotations
  --> src/findlike/core.py:70:37
   |
70 | def _match_name(name: str, pattern: Optional[str], case_insensitive: bool = False) -> bool:
   |                                     ^^^^^^^^^^^^^
71 |     if pattern is None:
72 |         return True
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
  --> src/findlike/core.py:79:40
   |
79 | def _match_type(entry: os.DirEntry, t: Optional[str]) -> bool:
   |                                        ^^^^^^^^^^^^^
80 |     if t is None:
81 |         return True
   |
help: Convert to `X | None`

UP045 Use `X | None` for type annotations
   --> src/findlike/core.py:114:42
    |
114 | def _match_size(path: str, op_and_bytes: Optional[SizeOp]) -> bool:
    |                                          ^^^^^^^^^^^^^^^^
115 |     if op_and_bytes is None:
116 |         return True
    |
help: Convert to `X | None`

UP006 Use `list` instead of `List` for type annotation
   --> src/findlike/core.py:154:12
    |
152 |         return
153 |
154 |     stack: List[Tuple[str, int, Optional[Iterator[os.DirEntry]]]] = []
    |            ^^^^
155 |
156 |     def push_dir(path: str, depth: int) -> None:
    |
help: Replace with `list`

UP006 Use `tuple` instead of `Tuple` for type annotation
   --> src/findlike/core.py:154:17
    |
152 |         return
153 |
154 |     stack: List[Tuple[str, int, Optional[Iterator[os.DirEntry]]]] = []
    |                 ^^^^^
155 |
156 |     def push_dir(path: str, depth: int) -> None:
    |
help: Replace with `tuple`

UP045 Use `X | None` for type annotations
   --> src/findlike/core.py:154:33
    |
152 |         return
153 |
154 |     stack: List[Tuple[str, int, Optional[Iterator[os.DirEntry]]]] = []
    |                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
155 |
156 |     def push_dir(path: str, depth: int) -> None:
    |
help: Convert to `X | None`

SIM300 [*] Yoda condition detected
   --> src/findlike/core.py:169:40
    |
168 |     if stat.S_ISDIR(root_stat.st_mode):
169 |         if options.maxdepth is None or 0 <= options.maxdepth:
    |                                        ^^^^^^^^^^^^^^^^^^^^^
170 |             push_dir(root, 0)
171 |         if options.mindepth <= 0 and _matches_for_path(root, None, options):
    |
help: Rewrite as `options.maxdepth >= 0`

SIM105 Use `contextlib.suppress(Exception)` instead of `try`-`except`-`pass`
   --> src/findlike/core.py:185:13
    |
183 |               entry = next(it)
184 |           except StopIteration:
185 | /             try:
186 | |                 it.close()  # type: ignore[attr-defined]
187 | |             except Exception:
188 | |                 pass
    | |____________________^
189 |               stack.pop()
190 |               continue
    |
help: Replace with `contextlib.suppress(Exception)`

UP045 Use `X | None` for type annotations
   --> src/findlike/core.py:226:41
    |
226 | def _matches_for_path(path: str, entry: Optional[os.DirEntry], options: Options) -> bool:
    |                                         ^^^^^^^^^^^^^^^^^^^^^
227 |     name = os.path.basename(path.rstrip(os.sep)) or path
228 |     if options.name and not _match_name(name, options.name, False):
    |
help: Convert to `X | None`

SIM103 Return the condition `_match_size(path, options.size)` directly
   --> src/findlike/core.py:267:5
    |
265 |                   return False
266 |
267 | /     if not _match_size(path, options.size):
268 | |         return False
269 | |
270 | |     return True
    | |_______________^
    |
help: Replace with `return _match_size(path, options.size)`

E741 Ambiguous variable name: `l`
  --> tests/test_cli.py:20:20
   |
18 |     assert rc == 0
19 |     out = capsys.readouterr().out
20 |     lines = [l for l in out.strip().split("\n") if l]
   |                    ^
21 |     assert any(l.endswith("b.txt") for l in lines)
   |

E741 Ambiguous variable name: `l`
  --> tests/test_cli.py:21:40
   |
19 |     out = capsys.readouterr().out
20 |     lines = [l for l in out.strip().split("\n") if l]
21 |     assert any(l.endswith("b.txt") for l in lines)
   |                                        ^
   |

Found 28 errors.
[*] 4 fixable with the `--fix` option (18 hidden fixes can be enabled with the `--unsafe-fixes` option).
(.venv) mirasol[main*] ~/code/pmat-test-gpt5 ᓆ source .venv/bin/activate && ruff check .
warning: The top-level linter settings are deprecated in favour of their counterparts in the `lint` section. Please update the following options in `pyproject.toml`:
  - 'ignore' -> 'lint.ignore'
  - 'select' -> 'lint.select'
All checks passed!
(.venv) mirasol[main*] ~/code/pmat-test-gpt5 ᓆ source .venv/bin/activate && mypy --version && mypy .
mypy 1.17.1 (compiled: yes)
src/findlike/core.py:152: error: Module "os" does not explicitly export attribute "sys"  [attr-defined]
src/findlike/core.py:164: error: Module "os" does not explicitly export attribute "sys"  [attr-defined]
src/findlike/core.py:194: error: Module "os" does not explicitly export attribute "sys"  [attr-defined]
tests/test_cli.py:13: error: Function is missing a return type annotation  [no-untyped-def]
tests/test_cli.py:13: error: Function is missing a type annotation for one or more arguments  [no-untyped-def]
tests/test_cli.py:24: error: Function is missing a return type annotation  [no-untyped-def]
tests/test_cli.py:24: error: Function is missing a type annotation for one or more arguments  [no-untyped-def]
tests/test_core.py:15: error: Function is missing a return type annotation  [no-untyped-def]
tests/test_core.py:15: note: Use "-> None" if function does not return a value
tests/test_core.py:25: error: Function is missing a return type annotation  [no-untyped-def]
tests/test_core.py:38: error: Function is missing a return type annotation  [no-untyped-def]
tests/test_core.py:59: error: Function is missing a return type annotation  [no-untyped-def]
tests/test_core.py:83: error: Function is missing a return type annotation  [no-untyped-def]
Found 12 errors in 3 files (checked 5 source files)
(.venv) mirasol[main*] ~/code/pmat-test-gpt5 ᓆ source .venv/bin/activate && mypy .
tests/test_cli.py:13: error: Function is missing a return type annotation  [no-untyped-def]
tests/test_cli.py:13: error: Function is missing a type annotation for one or more arguments  [no-untyped-def]
tests/test_cli.py:24: error: Function is missing a return type annotation  [no-untyped-def]
tests/test_cli.py:24: error: Function is missing a type annotation for one or more arguments  [no-untyped-def]
tests/test_core.py:15: error: Function is missing a return type annotation  [no-untyped-def]
tests/test_core.py:15: note: Use "-> None" if function does not return a value
tests/test_core.py:25: error: Function is missing a return type annotation  [no-untyped-def]
tests/test_core.py:38: error: Function is missing a return type annotation  [no-untyped-def]
tests/test_core.py:59: error: Function is missing a return type annotation  [no-untyped-def]
tests/test_core.py:83: error: Function is missing a return type annotation  [no-untyped-def]
Found 9 errors in 2 files (checked 5 source files)
(.venv) mirasol[main*] ~/code/pmat-test-gpt5 ᓆ source .venv/bin/activate && mypy .
Success: no issues found in 3 source files
